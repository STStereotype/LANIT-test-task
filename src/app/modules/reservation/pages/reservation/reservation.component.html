<div class="reservation_wrapper">
    <p class="title">Бронирование номера</p>
    <p class="hr"></p>
    <form class="form" [formGroup]="form">
        <div class="check-in-date">
            <div>
                <app-date-input [form]="getAsFormGroup(form)" [formControlName]="'startDate'" [labelText]="'Дата заезда'" [minDate]="startDate" (onChange)="arrivalDate()"></app-date-input>
                <p *ngIf="isInvalid(form.get('startDate'))" class="invalid">Обязательное поле!</p>
            </div>
            <div>
                <app-date-input [form]="getAsFormGroup(form)" [formControlName]="'endDate'" [labelText]="'Дата отъезда'" [minDate]="endDate"></app-date-input>
                <p *ngIf="isInvalid(form.get('endDate'))" class="invalid">Обязательное поле!</p>
            </div>
        </div>
        <div formGroupName="user">
            <div>
                <app-only-letters-input [form]="getAsFormGroup(form.get('user'))" [placeholder]="'Имя'" [formControlName]="'firstName'" [labelText]="'Имя'"></app-only-letters-input>
                <p *ngIf="isInvalid(form.get('user.firstName'))" class="invalid">Обязательное поле!</p>
            </div>
            <div>
                <app-only-letters-input [form]="getAsFormGroup(form.get('user'))" [placeholder]="'Фамилия'" [formControlName]="'lastName'" [labelText]="'Фамилия'"></app-only-letters-input>
                <p *ngIf="isInvalid(form.get('user.lastName'))" class="invalid">Обязательное поле!</p>
            </div>
            <div>
                <app-only-letters-input [form]="getAsFormGroup(form.get('user'))" [placeholder]="'Отчество'" [formControlName]="'patronymicName'" [labelText]="'Отчество'"></app-only-letters-input>
                <p *ngIf="isInvalid(form.get('user.patronymicName'))" class="invalid">Обязательное поле!</p>
            </div>
            <div>
                <app-date-input [form]="getAsFormGroup(form.get('user'))" [formControlName]="'birthday'" [labelText]="'Дата рождения'" [maxDate]="dateBirth"></app-date-input>
                <p *ngIf="isInvalid(form.get('user.birthday'))" class="invalid">Обязательное поле!</p>
            </div>
        </div>
        <div>
            <div class="block-input">
                <label for="roomTypeId">тип номера</label>
                <select
                    id="roomTypeId"
                    name="roomTypeId"
                    formControlName="roomTypeId"
                    (change)="roomTypeChanged()"
                >
                    <option *ngFor="let text of hotelRoomType" value="{{text.id}}">{{text.name}}</option>
                </select>
            </div>
            <p *ngIf="isInvalid(form.get('roomTypeId'))" class="invalid">Обязательное поле!</p>
        </div>
        <div>
            <div class="block-input">
                <label for="countOfGuests">Количество гостей</label>
                <select
                    id="countOfGuests"
                    name="countOfGuests"
                    formControlName="countOfGuests"
                >
                    <option value="{{index + 1}}" *ngFor="let i of numberGuests(); let index = index">{{index + 1}}</option>
                </select>
            </div>
            <p *ngIf="isInvalid(form.get('countOfGuests'))" class="invalid">Измените количество гостей</p>
        </div>
        <div class="block-input">
            <label for="withAnimal">С животными</label>
            <input
                type="checkBox"
                id="withAnimal"
                name="withAnimal"
                formControlName="withAnimal"
            >
        </div>
        <button class="btn" type="button" (click)="save()">Забронировать</button>
    </form>
</div>
